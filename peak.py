import matplotlib.pyplot as plt
import numpy as np
import wave
import sys
from scipy.signal import find_peaks
import math


# Extract Raw Audio from Wav File
signal = "1124.5,-78715.22797477059,-123241.875823966,0.0,1125.5,-40804.560275206604,-111465.11645985699,41.185925165709705,1125.25,-5905.674399176899,-96385.1961654744,26.565051177078,1126.75,27808.052129062,-78643.3035519692,36.869897645844,1126.0,7249.98069026455,-66372.83437450719,24.2277453179542,1125.75,1013.6024206134,-56746.200546632805,18.434948822922,1125.0,-11994.669936291799,-50353.1247451556,10.1246716553978,1125.25,-24879.2210771171,-46713.9956497215,10.6196552761551,1124.25,-28592.3612032617,-44125.1907287987,3.17983011986423,1124.0,-37097.7557477122,-43121.2714457863,1.4320961841646498,1123.5,-69154.4090835383,-46840.29110832231,-1.30195267257888,0.0,0.0,0.0,0.0,0.0".split(",")
signal = np.array([math.ceil(abs(float(x))) for x in signal])
print(max(signal))
print(min(signal))
plt.title("Signal Wave...")
plt.plot(signal)
plt.show(origin="upper")

peaks, _ = find_peaks(signal, distance=10)

print(peaks)
print(max(signal[peaks]))
plt.plot(signal)
plt.plot(peaks, signal[peaks], "x")
# plt.show()
plt.savefig("peak.png")